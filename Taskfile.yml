# https://taskfile.dev
version: '3'
includes:
  omz: profiles/omz/Taskfile.yml
  ant: profiles/ant/Taskfile.yml
tasks:
  default: Happy with dsh!
  bench: time zsh -lic "exit"

  doc: |
    mkdir -p doc
    cd doc

    man zshbuiltins | col -b > zshbuiltins.txt
  
  ## Setup

  setup: |
    task rc.ln
    
    mkdir -p _local
    ln -sf ~/.tools _local

  rc: ls -ld ~/.z*
  rc.ln: |
    # todo better refactor
    [ -f ~/.zshrc ] && {
      bakfile=~/.zshrc.bak-$(date '+%Y-%m-%dT%H-%M-%S')
      mv ~/.zshrc $bakfile
      echo "backup into $bakfile"
    }
    ln -sf {{.TASKFILE_DIR}}/main.zsh ~/.zshrc
    ln -sf {{.TASKFILE_DIR}} ~/.zsh
  rc.rm: rm ~/.zshrc
  